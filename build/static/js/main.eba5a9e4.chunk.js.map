{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Numbers.js","services/persons.js","App.js","index.js"],"names":["Filter","_ref","filter","handleFilterchange","react_default","a","createElement","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Number","props","Fragment","name","number","onClick","removeFunction","id","Numbers","persons","map","person","Numbers_Number","key","baseUrl","services_persons","axios","get","then","response","data","newObject","post","put","concat","delete","InfoNotification","message","className","ErrorNotification","_ref2","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setFilter","_useState9","_useState10","infoMessage","setInfoMessage","_useState11","_useState12","errorMessage","setErrorMessage","useEffect","personService","initialPersons","filteredPersons","toLowerCase","includes","App_InfoNotification","App_ErrorNotification","components_Filter","event","target","components_PersonForm","preventDefault","personObject","alreadyExists","find","element","differentNumber","window","alert","confirm","p","changedPerson","objectSpread","returnData","setTimeout","catch","error","newPersons","returnedPersons","console","log","components_Numbers","result","removedPerson","status","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.eba5a9e4.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ filter, handleFilterchange }) => {\r\n    return (\r\n        <div>\r\n            <p>\r\n            filter shown with <input value={filter} onChange={handleFilterchange} />\r\n            </p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst PersonForm = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => {\r\n    return (\r\n        <div>\r\n            <h3>add a new</h3>\r\n            <form onSubmit={addPerson}>\r\n            <p>name: <input value={newName} onChange={handleNameChange} /></p>\r\n            <p>number: <input value={newNumber} onChange={handleNumberChange} /></p>\r\n            <button type=\"submit\">add</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Number = (props) => {\r\n    return (\r\n        <>\r\n            <p>{props.name} {props.number}<button onClick={() => props.removeFunction(props.id, props.name)}>delete</button></p>\r\n        </>\r\n    )\r\n}\r\n\r\nconst Numbers = (props) => {\r\n    const { persons, removeFunction } = props;\r\n    const numbers = () => persons.map(person => <Number key={person.name} name={person.name} number={person.number} removeFunction={removeFunction} id={person.id}/>)\r\n    return (\r\n        <>\r\n            <h2>Numbers</h2>\r\n            {numbers()}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Numbers;","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst remove = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`);\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Numbers from './components/Numbers';\nimport personService from './services/persons';\n\nconst InfoNotification = ({ message }) => {\n    if (message === null) {\n        return null;\n    }\n\n    return (\n        <div className='info'>\n            {message}\n        </div>\n    )\n}\n\nconst ErrorNotification = ({ message }) => {\n    if (message === null) {\n        return null;\n    }\n\n    return (\n        <div className='error'>\n            {message}\n        </div>\n    )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]); \n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ filter, setFilter ] = useState('');\n  const [ infoMessage, setInfoMessage ] = useState(null);\n  const [ errorMessage, setErrorMessage ] = useState(null);\n\n  useEffect(() => {\n      personService\n        .getAll()\n        .then(initialPersons => {\n          setPersons(initialPersons)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n      event.preventDefault();\n      const personObject = {\n          name: newName,\n          number: newNumber\n      }\n      \n      const alreadyExists = persons.find(function(element) {\n          return element.name === personObject.name && element.number === personObject.number;\n      });\n\n      const differentNumber = persons.find(function(element) {\n        return element.name === personObject.name && element.number !== personObject.number;\n      });\n\n      if (!alreadyExists && !differentNumber) {\n        personService\n        .create(personObject)\n        .then(returnedPersons => {\n            setPersons(persons.concat(returnedPersons))\n            setNewName('');\n            setNewNumber('');\n            setInfoMessage(\n                `Added ${personObject.name}`\n              )\n              setTimeout(() => {\n                setInfoMessage(null)\n              }, 5000)\n        })\n        .catch(error => {\n            console.log(error.response.data);\n            console.log(error.response.data.error);\n            setNewName('');\n            setNewNumber('');\n            if (error.response.data)\n                setErrorMessage(`${error.response.data.error}`);\n            else\n                setErrorMessage(`Couldn't add ${personObject.name}`);\n            setTimeout(() => {\n                setInfoMessage(null)\n            }, 5000)\n        });\n      }\n\n      else if (alreadyExists) {\n        window.alert(`${newName} is already added to phonebook`);\n        setNewName('');\n        setNewNumber('');\n        return;\n      }\n\n      \n      else if (differentNumber) {\n        const message = `${newName} is already added to phonebook, replace the old number with a new one?` \n        const askForUpdate = window.confirm(message);\n\n        if (askForUpdate) {\n            const person = persons.find(p => p.name === personObject.name);\n            const changedPerson = { ...person, number: personObject.number }\n            personService\n            .update(person.id, changedPerson)\n            .then(returnData => {\n                setPersons(persons.map(p => p.id !== person.id ? p : returnData));\n                setNewName('');\n                setNewNumber('');\n                setInfoMessage(\n                    `Edited ${personObject.name}'s number`\n                  )\n                  setTimeout(() => {\n                    setInfoMessage(null)\n                  }, 5000)\n            })\n            .catch(error => {\n                const newPersons = persons.filter(p => p.id !== person.id); \n                setPersons(newPersons);\n                setErrorMessage(`Couldn't edit ${personObject.name}'s number, because name didn't exist on the server`)\n                setTimeout(() => {\n                    setErrorMessage(null)\n                }, 5000)\n            });\n        }\n    }\n  }\n\n  const removePerson = (id, name) => {\n      const message = `Delete ${name} ?` \n      let result = window.confirm(message);\n      const removedPerson = persons.filter(person => person.id === id);\n\n      if (result) {\n        personService.remove(id)\n        .then(response => {\n            if (response.status === 204) {\n              const newPersons = persons.filter(person => person.id !== id); \n              setPersons(newPersons);\n              setInfoMessage(\n                `Removed ${removedPerson[0].name}`\n              )\n              setTimeout(() => {\n                setInfoMessage(null)\n              }, 5000)\n            }\n        })\n        .catch(error => {\n            const newPersons = persons.filter(person => person.id !== id); \n            setPersons(newPersons);\n            setErrorMessage(`${removedPerson[0].name} was already removed`)\n            setTimeout(() => {\n                setErrorMessage(null)\n            }, 5000)\n        });\n      }\n  }\n\n  const handleNameChange = (event) => {\n      setNewName(event.target.value);\n  }\n\n  const handleNumberChange = (event) => {\n      setNewNumber(event.target.value);\n  }\n\n  const handleFilterchange = (event) => {\n      setFilter(event.target.value)\n  }\n\n  const filteredPersons = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n  \n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <InfoNotification message={infoMessage} />\n      <ErrorNotification message={errorMessage} />\n      <Filter filter={filter} handleFilterchange={handleFilterchange} />\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />  \n      <Numbers persons={filteredPersons} removeFunction={removePerson}/>\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}